# 既知の問題点と改善案

**作成日**: 2025-12-27
**プロジェクト**: 高齢者向け脳トレアプリ

---

## 🐛 既知の問題点

### 1. 音声ファイル未実装
**状態**: 🟡 未完了

**説明**:
- soundManager.tsは実装済みだが、実際の音声ファイル（.mp3, .wav等）がまだ配置されていない
- 現在は音声再生機能が実質的に動作していない

**影響**:
- 正解時/不正解時の効果音が鳴らない
- レベルクリア時の音が鳴らない

**対応方法**:
1. 以下の音声ファイルを準備:
   - `success.mp3`: 正解時の音
   - `error.mp3`: 不正解時の音
   - `tap.mp3`: ボタンタップ音
   - `clear.mp3`: レベルクリア音
   - `perfect.mp3`: パーフェクト時の音

2. `brain-training-app/assets/sounds/` ディレクトリに配置

3. 動作確認

**優先度**: 中

---

### 2. 実際のAdMob App ID未設定
**状態**: 🟡 要対応

**説明**:
- 現在はGoogleの公式テストIDを使用
- 本番リリース前に実際のAdMob App IDとAd Unit IDに置き換える必要がある

**対応方法**:
1. Google AdMobでアプリを登録
2. iOS/Android用のApp IDを取得
3. バナー広告のAd Unit IDを取得
4. `app.json`のgoogleMobileAdsAppIdを更新
5. `AdSlot.tsx`のAD_UNIT_IDSを更新

**優先度**: 高（リリース前必須）

---

### 3. IAP商品ID未登録
**状態**: 🟡 要対応

**説明**:
- 現在は`remove_ads_pro`という仮のProduct IDを使用
- App Store Connect / Google Play Consoleで実際の商品を登録する必要がある

**対応方法**:
1. App Store Connectで消費型商品を登録
2. Google Play Consoleで管理対象商品を登録
3. 両方で同じProduct ID（`remove_ads_pro`）を使用
4. 価格設定（推奨: ¥370 / $2.99）
5. 動作確認

**優先度**: 高（リリース前必須）

---

### 4. アプリアイコン・スプラッシュ画面未作成
**状態**: 🟡 未完了

**説明**:
- デフォルトのExpoアイコンを使用している
- カスタムアイコンとスプラッシュ画面が必要

**対応方法**:
1. アプリアイコンをデザイン（1024×1024px）
2. スプラッシュ画面をデザイン
3. `app.json`で設定
4. `npx expo prebuild`で各サイズを生成

**優先度**: 中（Phase 6で対応）

---

### 5. プライバシーポリシー未作成
**状態**: 🟡 未完了

**説明**:
- App Store / Google Playの審査で必要
- 広告配信・データ収集に関する記載が必要

**対応方法**:
1. プライバシーポリシーを作成
2. Webページとしてホスティング
3. アプリ内からリンク

**優先度**: 高（リリース前必須）

---

## 💡 改善案

### 1. 実績・バッジシステム
**説明**: ユーザーのモチベーション向上のため、実績機能を追加

**実装案**:
- 「レベル5クリア」「レベル10クリア」等のマイルストーン
- 「パーフェクト達成」バッジ
- 「連続クリア」バッジ

**優先度**: 低（将来的な機能）

---

### 2. 統計・履歴画面
**説明**: プレイ履歴や正解率の推移を可視化

**実装案**:
- 統計画面の追加
- 正解率グラフ
- 総プレイ回数表示

**優先度**: 低（将来的な機能）

---

### 3. ダークモード対応
**説明**: 夜間プレイ時の目の負担軽減

**実装案**:
- React Native Paperのダークテーマ使用
- 設定画面でライト/ダーク切り替え

**優先度**: 低（将来的な機能）

---

### 4. フォントサイズ調整機能
**説明**: さらなるアクセシビリティ向上

**実装案**:
- 小/中/大のフォントサイズ選択
- UI_CONFIG.MIN_FONT_SIZEを動的に変更

**優先度**: 低（将来的な機能）

---

### 5. 複数ユーザー対応
**説明**: 家族で共有する際に便利

**実装案**:
- ユーザープロフィール作成
- ユーザー切り替え機能
- 各ユーザーの進行状況を個別管理

**優先度**: 低（将来的な機能）

---

### 6. チュートリアル機能
**説明**: 初回プレイ時の使い方説明

**実装案**:
- 初回起動時にチュートリアル表示
- 各画面の説明オーバーレイ
- スキップ可能

**優先度**: 中（高齢者向けには有用）

---

### 7. 難易度の自動調整
**説明**: ユーザーの実力に応じて難易度を自動調整

**実装案**:
- 正解率が高い場合、自動的に上のモードを推奨
- 失敗が続く場合、ヒント機能を提案

**優先度**: 低（将来的な機能）

---

## 🔧 技術的改善案

### 1. TypeScript strictモードの有効化
**説明**: より厳格な型チェックでバグを防ぐ

**対応方法**:
- `tsconfig.json`で`"strict": true`を有効化
- 型エラーを修正

**優先度**: 中

---

### 2. ユニットテストの追加
**説明**: コード品質向上とリグレッション防止

**実装案**:
- Jestでゲームロジックのテスト
- React Testing Libraryでコンポーネントテスト

**優先度**: 中

---

### 3. コード分割・遅延読み込み
**説明**: 初回読み込み時間の短縮

**実装案**:
- React.lazyで画面を遅延読み込み
- 画像の最適化

**優先度**: 低

---

### 4. エラー追跡ツールの導入
**説明**: 本番環境でのエラー監視

**実装案**:
- Sentryの導入
- クラッシュレポート収集

**優先度**: 中（リリース後）

---

### 5. アナリティクスの導入
**説明**: ユーザー行動の分析

**実装案**:
- Google Analyticsの導入
- Firebase Analyticsの使用

**優先度**: 低（リリース後）

---

## 📝 ドキュメント改善

### 1. README.md の充実
- [ ] インストール手順の詳細化
- [ ] スクリーンショットの追加
- [ ] トラブルシューティングセクション

### 2. API ドキュメント
- [ ] 各Context APIの使用方法
- [ ] コンポーネントのPropsドキュメント

### 3. 開発者ガイド
- [ ] 新機能追加の手順
- [ ] コーディング規約

---

## ✅ 対応済み項目

### Phase 4.5で対応済み
- [x] Google AdMob統合
- [x] アプリ内課金（IAP）実装
- [x] ヒント機能実装
- [x] 超級モードのパネル移動改善
- [x] 高齢者向けUI/UX最適化

---

## 🎯 リリース前必須対応事項

Phase 6（リリース準備）で以下を必ず対応:

1. ✅ AdMob App IDの本番設定
2. ✅ IAP商品IDの登録
3. ✅ アプリアイコン・スプラッシュ画面作成
4. ✅ プライバシーポリシー作成
5. ✅ 利用規約作成（必要に応じて）
6. ✅ スクリーンショット準備
7. ✅ ストア掲載文作成
8. ✅ 最終動作確認

---

**最終更新**: 2025-12-27
**次回更新予定**: Phase 5完了時
