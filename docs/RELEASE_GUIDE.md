# リリース手順書（App Store・Google Play）

このガイドでは、記憶力トレーニングアプリをApp StoreとGoogle Play Storeにリリースする手順を説明します。

---

## 📋 リリース前チェックリスト

以下をすべて完了してから、リリース作業を開始してください。

### 必須準備
- [ ] Apple Developer Program 登録完了（iOS）
- [ ] Google Play Console 登録完了（Android）
- [ ] Google AdMob アカウント作成・審査完了
- [ ] プライバシーポリシー作成済み（Web公開）
- [ ] 利用規約作成済み（Web公開）
- [ ] アプリアイコン作成済み（1024x1024px）
- [ ] スプラッシュ画面作成済み（2732x2732px）
- [ ] スクリーンショット作成済み（各サイズ）

### コード準備
- [ ] AdMob本番App ID設定済み
- [ ] IAP商品ID登録済み
- [ ] バージョン番号設定済み（1.0.0）
- [ ] Bundle ID / Package Name 設定済み
- [ ] 最終動作確認完了

---

## 🍎 Part 1: iOS App Store リリース

### Step 1: EAS Buildでビルド

#### 1-1. EAS CLI インストール

```bash
npm install -g eas-cli
eas login
```

#### 1-2. プロジェクト設定

```bash
cd brain-training-app
eas build:configure
```

#### 1-3. app.jsonの確認

```json
{
  "expo": {
    "name": "記憶力トレーニング",
    "slug": "brain-training-app",
    "version": "1.0.0",
    "ios": {
      "bundleIdentifier": "com.yourname.braintraining",
      "buildNumber": "1"
    }
  }
}
```

#### 1-4. iOSビルド実行

```bash
eas build --platform ios
```

ビルドが完了したら、`.ipa` ファイルがダウンロードできます。

---

### Step 2: App Store Connectで アプリ情報を入力

#### 2-1. アプリ基本情報

1. App Store Connect (https://appstoreconnect.apple.com/) にログイン
2. 「マイApp」→「新規App」（未作成の場合）
3. 基本情報を入力：
   - **プラットフォーム**: iOS
   - **名前**: 記憶力トレーニング
   - **プライマリ言語**: 日本語
   - **Bundle ID**: `com.yourname.braintraining`
   - **SKU**: `brain-training-001`
   - **ユーザーアクセス**: フルアクセス

#### 2-2. App情報

- **カテゴリ**:
  - プライマリ: ゲーム → パズル
  - セカンダリ: 教育
- **コンテンツの権利**: （あなたの名前/会社名）

#### 2-3. 価格および配信可能状況

- **価格**: 無料
- **配信可能地域**: 日本（または全世界）

#### 2-4. App内課金

1. 「機能」→「App内課金」
2. すでに作成した`remove_ads_pro`（¥370）が表示されることを確認

---

### Step 3: バージョン情報を入力

#### 3-1. 基本情報

- **バージョン**: 1.0.0
- **著作権**: © 2025 [あなたの名前]
- **年齢制限**: 4+（すべての年齢向け）

#### 3-2. 説明文

`docs/STORE_LISTING.md` の内容をコピー：

- **プロモーションテキスト**: 170文字以内
- **説明**: 4000文字以内
- **キーワード**: 100文字以内（カンマ区切り）
- **サポートURL**: （あなたのウェブサイトまたはGitHub Pages）
- **マーケティングURL**: （オプション）

#### 3-3. スクリーンショット

以下のサイズをアップロード：

- **iPhone 6.7" (Pro Max)**:
  - 1290 x 2796 px
  - 最大10枚
  - 推奨: 5〜7枚

- **iPhone 6.5" (XS Max)**:
  - 1242 x 2688 px
  - 最大10枚

※ iPad用のスクリーンショットはオプション

#### 3-4. App Preview（プレビュー動画）

オプションですが、あると審査通過率が上がります。

---

### Step 4: ビルドをアップロード

#### 4-1. EASでビルドをアップロード

```bash
eas submit --platform ios
```

または、手動でTransporterアプリを使用：

1. macOS Transporter アプリを起動
2. `.ipa` ファイルをドラッグ&ドロップ
3. 「配信」をクリック

#### 4-2. App Store Connectで確認

1. 「Appストア」タブ
2. 「ビルド」セクション
3. アップロードしたビルドを選択

---

### Step 5: 審査に提出

#### 5-1. App Review情報

- **連絡先情報**: あなたのメールアドレス・電話番号
- **デモアカウント**: 不要（ログイン不要のため）
- **メモ**:
  ```
  このアプリは高齢者向けの記憶力トレーニングゲームです。
  ログイン不要で、すぐにプレイできます。
  広告はGoogle AdMobを使用しており、G指定（全年齢向け）に設定しています。
  ```

#### 5-2. 輸出コンプライアンス

- **暗号化を使用しているか**: いいえ
  （HTTPSのみの場合は「いいえ」を選択）

#### 5-3. 広告識別子（IDFA）

- **広告を配信しているか**: はい
- **AdMobを使用**: はい

#### 5-4. 提出

「審査に提出」ボタンをクリック

---

### Step 6: 審査待ち

- **審査期間**: 通常1〜3日
- **ステータス確認**: App Store Connectで随時確認
- **通知**: 審査結果はメールで通知されます

---

## 🤖 Part 2: Google Play Store リリース

### Step 1: EAS Buildでビルド

#### 1-1. app.jsonの確認

```json
{
  "expo": {
    "version": "1.0.0",
    "android": {
      "package": "com.yourname.braintraining",
      "versionCode": 1
    }
  }
}
```

#### 1-2. Androidビルド実行

```bash
eas build --platform android
```

または AAB（推奨）形式でビルド：

```bash
eas build --platform android --profile production
```

ビルド完了後、`.aab` または `.apk` ファイルをダウンロード

---

### Step 2: Google Play Consoleでアプリを作成

#### 2-1. アプリ作成

1. Google Play Console (https://play.google.com/console/) にログイン
2. 「アプリを作成」をクリック
3. アプリ情報を入力：
   - **アプリ名**: 記憶力トレーニング
   - **デフォルトの言語**: 日本語
   - **アプリまたはゲーム**: ゲーム
   - **無料または有料**: 無料

#### 2-2. ストアの設定

以下の項目を順番に入力：

---

### Step 3: メインストア掲載情報

#### 3-1. アプリの詳細

- **アプリ名**: 記憶力トレーニング - 脳トレゲーム
- **簡単な説明**: 80文字以内
  ```
  画像を覚えて選ぶだけ！シンプルで楽しい記憶力トレーニングアプリ。
  ```
- **詳細説明**: `docs/STORE_LISTING.md` の内容をコピー

#### 3-2. グラフィック

- **アイコン**: 512 x 512 px（PNG、32-bit）
- **フィーチャーグラフィック**: 1024 x 500 px（必須）
- **スクリーンショット**:
  - スマートフォン: 最低2枚、最大8枚
  - 7インチタブレット: 最低2枚（オプション）
  - 10インチタブレット: 最低2枚（オプション）

#### 3-3. カテゴリとタグ

- **アプリのカテゴリ**: ゲーム → パズル
- **タグ**: 脳トレ、記憶力、シニア向け

---

### Step 4: アプリのコンテンツ

#### 4-1. プライバシーポリシー

- **プライバシーポリシーのURL**: （あなたのWebサイトのURL）
  例: https://yourwebsite.com/privacy-policy

#### 4-2. アプリのアクセス権限

- **権限の宣言**: すべて「いいえ」（このアプリは特別な権限不要）

#### 4-3. データの安全性

- **個人情報を収集しているか**: いいえ
- **データの共有**: AdMobによる広告ID収集のみ
- **データの削除リクエスト**: デバイス内のデータのみ（アンインストールで削除）

#### 4-4. 広告

- **広告を表示しているか**: はい
  Google AdMobを使用

#### 4-5. コンテンツレーティング

質問に回答して、レーティングを取得：

- **暴力**: なし
- **セクシャル**: なし
- **言語**: 穏やか
- **その他**: なし

結果: **3歳以上**（ESRB: Everyone）

#### 4-6. ターゲット層

- **ターゲット年齢**: 18歳以上（高齢者向けのため）
- **子供向けアプリではない**: はい

---

### Step 5: アプリ内商品

1. 「収益化」→「アプリ内商品」
2. すでに作成した`remove_ads_pro`（¥370）が表示されることを確認

---

### Step 6: リリースの準備

#### 6-1. 内部テスト（推奨）

1. 「リリース」→「テスト」→「内部テスト」
2. 「新しいリリースを作成」
3. `.aab`ファイルをアップロード
4. リリース名: `1.0.0 (1)` - 初回リリース
5. リリースノート:
   ```
   初回リリース

   【主な機能】
   ・全20レベルの記憶力ゲーム
   ・4つの難易度モード
   ・ヒント機能
   ・プレイ履歴の記録
   ```
6. テスターを追加（あなたのGoogleアカウント）
7. 「確認」→「リリース開始」

#### 6-2. 本番リリース

1. 内部テストで問題がなければ、「製品版」を選択
2. 「新しいリリースを作成」
3. `.aab`ファイルをアップロード
4. リリースノートを入力
5. 「確認」→「製品版として公開」

---

### Step 7: 審査待ち

- **審査期間**: 通常数時間〜2日
- **ステータス確認**: Google Play Consoleで随時確認
- **通知**: 審査結果はメールで通知されます

---

## ✅ リリース後の確認事項

### 両プラットフォーム共通

- [ ] アプリがストアに表示されているか
- [ ] アイコン・スクリーンショットが正しく表示されているか
- [ ] 説明文が正しく表示されているか
- [ ] ダウンロード・インストールができるか
- [ ] 実機で動作確認
- [ ] 広告が表示されるか
- [ ] アプリ内課金が機能するか
- [ ] クラッシュが発生しないか

---

## 📊 リリース後のモニタリング

### App Store Connect

1. 「分析」タブでダウンロード数を確認
2. 「評価とレビュー」でユーザーレビューを確認
3. 「クラッシュ」でクラッシュレポートを確認

### Google Play Console

1. 「統計情報」でダウンロード数を確認
2. 「評価とレビュー」でユーザーレビューを確認
3. 「Android Vitals」でクラッシュレポートを確認

### AdMob

1. AdMobダッシュボードで収益を確認
2. インプレッション数・CTRを確認

---

## 🆘 トラブルシューティング

### 審査で却下された場合

#### よくある却下理由

1. **プライバシーポリシーがない**
   → Web上に公開し、URLを設定

2. **スクリーンショットが不適切**
   → 実際のアプリ画面を使用

3. **説明文が不明確**
   → より詳細に、分かりやすく書き直す

4. **IAP商品の説明が不十分**
   → 「広告削除」であることを明記

5. **年齢制限が適切でない**
   → コンテンツに合った年齢制限に変更

#### 対処方法

1. 却下理由をよく読む
2. 指摘された箇所を修正
3. 「解決センター」で返信
4. 再提出

---

## 📝 アップデート手順（将来の更新時）

### バージョン番号の更新

```json
{
  "expo": {
    "version": "1.0.1", // バージョンアップ
    "ios": {
      "buildNumber": "2" // iOS: ビルド番号をインクリメント
    },
    "android": {
      "versionCode": 2 // Android: versionCodeをインクリメント
    }
  }
}
```

### リリース手順

1. コードを修正
2. バージョン番号を更新
3. ビルド実行
4. ストアにアップロード
5. リリースノートを記入
6. 審査に提出

---

## 📞 サポート

- **App Store Review**: https://developer.apple.com/contact/app-store/
- **Google Play Support**: https://support.google.com/googleplay/android-developer/

---

## 🎉 おめでとうございます！

リリース作業お疲れさまでした。アプリが世界中のユーザーに届くのを楽しみにしています！

---

**最終更新**: 2025年12月28日
